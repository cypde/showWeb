(()=>{var e={};e.id=928,e.ids=[928],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},5878:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,originalPathname:()=>g,pages:()=>c,routeModule:()=>h,tree:()=>p});var r=a(7096),s=a(6132),i=a(7284),o=a.n(i),n=a(2564),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(t,l);let p=["",{children:["gallery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,157)),"D:\\work\\qz\\showWeb\\musician-website\\app\\gallery\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3497)),"D:\\work\\qz\\showWeb\\musician-website\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\work\\qz\\showWeb\\musician-website\\app\\gallery\\page.jsx"],g="/gallery/page",d={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/gallery/page",pathname:"/gallery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},5779:(e,t,a)=>{Promise.resolve().then(a.bind(a,9230))},9230:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=a(784),s=a(9885),i=a(1413),o=a(9934),n=a(9718);let __WEBPACK_DEFAULT_EXPORT__=()=>{let{t:e}=(0,n.$)(),[t,a]=(0,s.useState)([]),[l,p]=(0,s.useState)(!0),[c,g]=(0,s.useState)(1),[d,h]=(0,s.useState)(1),[m,u]=(0,s.useState)(0);(0,s.useEffect)(()=>{let fetchGallery=async()=>{try{let e=(c-1)*9,{data:t,error:r,count:s}=await o.Z.from("gallery").select("*",{count:"exact"}).eq("is_active",!0).order("order_position",{ascending:!0}).range(e,e+9-1);r?console.error("获取画廊图片失败:",r):(a(t||[]),u(s||0),h(Math.ceil((s||0)/9)))}catch(e){console.error("获取数据失败:",e)}finally{p(!1)}};fetchGallery()},[c]);let handlePageChange=e=>{e>=1&&e<=d&&(g(e),window.scrollTo({top:0,behavior:"smooth"}))};if(l)return r.jsx(i.Z,{children:r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsx("p",{children:"Loading..."})})});let x=t.length>0?t:["https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=mezzo-soprano%20singer%20performing%20on%20stage%2C%20professional%20photography%2C%20dramatic%20lighting%2C%20high%20quality&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=opera%20singer%20in%20costume%2C%20backstage%20photo%2C%20professional%20lighting%2C%20high%20quality&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=mezzo-soprano%20with%20orchestra%2C%20concert%20performance%2C%20professional%20photography%2C%20high%20quality&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=opera%20singer%20rehearsing%2C%20professional%20photography%2C%20natural%20lighting%2C%20high%20quality&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=mezzo-soprano%20singer%20taking%20bow%20on%20stage%2C%20audience%20applause%2C%20professional%20photography&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=opera%20singer%20in%20elegant%20gown%2C%20red%20carpet%20event%2C%20professional%20photography&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=mezzo-soprano%20performing%20in%20opera%20production%2C%20elaborate%20stage%20set%2C%20professional%20lighting&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=classical%20singer%20in%20concert%20hall%2C%20solo%20performance%2C%20professional%20photography&image_size=landscape_4_3","https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=mezzo-soprano%20with%20conductor%2C%20backstage%20photo%2C%20professional%20photography&image_size=landscape_4_3"],_=0===t.length;return r.jsx(i.Z,{children:r.jsx("section",{className:"py-20 px-4 md:px-8 lg:px-16",children:(0,r.jsxs)("div",{className:"container mx-auto",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-16 text-center",children:e.gallery.title}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map((e,t)=>(0,r.jsxs)("div",{className:"rounded-xl overflow-hidden shadow-elegant card-hover",children:[r.jsx("div",{className:"p-3 bg-white",children:r.jsx("h3",{className:"text-sm font-medium text-gray-700",children:_?`Performance ${t+1}`:e.title||`Performance ${t+1}`})}),r.jsx("img",{src:_?e:e.image_url,alt:_?`Gallery Image ${t+1}`:e.title,className:"w-full h-48 object-cover hover:opacity-90 transition-opacity"})]},_?t:e.id))}),!_&&d>1&&(0,r.jsxs)("div",{className:"mt-16 flex justify-center items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>handlePageChange(c-1),disabled:1===c,className:`px-4 py-2 rounded-md ${1===c?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:"Previous"}),(()=>{let e=[],t=Math.max(1,c-Math.floor(2.5)),a=t+5-1;a>d&&(t=Math.max(1,(a=d)-5+1));for(let r=t;r<=a;r++)e.push(r);return e})().map(e=>r.jsx("button",{onClick:()=>handlePageChange(e),className:`px-4 py-2 rounded-md ${c===e?"bg-black text-white":"bg-gray-200 text-black hover:bg-gray-300"}`,children:e},e)),r.jsx("button",{onClick:()=>handlePageChange(c+1),disabled:c===d,className:`px-4 py-2 rounded-md ${c===d?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-black text-white hover:bg-gray-800"}`,children:"Next"})]}),(0,r.jsxs)("div",{className:"ml-8 text-gray-600",children:["Page ",c," of ",d," (",m," items)"]})]})]})})})}},157:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>o,__esModule:()=>i,default:()=>l});var r=a(5153);let s=(0,r.createProxy)(String.raw`D:\work\qz\showWeb\musician-website\app\gallery\page.jsx`),{__esModule:i,$$typeof:o}=s,n=s.default,l=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[472,702,326,120,718],()=>__webpack_exec__(5878));module.exports=a})();